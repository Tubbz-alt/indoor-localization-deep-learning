\begin{tikzpicture}
  %%TODO: move definitions and style into dedicated file
  \def\InputColor{rgb:green,3;black,2.1;white,1}
  \def\FcColor{rgb:blue,5;red,2.5;white,5}
  \def\FcReluColor{rgb:blue,5;red,5;white,4}
  \def\ConvColor{rgb:yellow,5;red,2.5;white,5}
  \def\ConvReluColor{rgb:yellow,5;red,5;white,5}
  \def\PoolColor{rgb:red,1;black,0.3}
  \def\AvgPoolColor{rgb:red,1;black,0.3}
  % \def\AvgPoolColor{rgb:blue,5;green,2.5;white,5}
  \def\DcnvColor{rgb:blue,5;green,2.5;white,5}
  \def\SoftmaxColor{rgb:magenta,5;black,7}
  \def\SumColor{rgb:blue,5;green,15}
  \def\poolsep{0.5}
  \def\poolwidth{0.4}
  \def\fcsep{1}
  \def\FlattenColor{rgb:black,0.5}
  %%% REDEFINING CONNECTION ARROW STYLE AND WIDTH (./layers/init.tex) %%%
  \def\edgecolor{rgb:black,1}
  \renewcommand{\midarrow}{\tikz \draw[-Stealth,line width =0.3mm,draw=\edgecolor] (-0.3,0) -- ++(0.3,0);}
  \tikzstyle{connection}=[thick,every node/.style={sloped,allow upside down},draw=\edgecolor,opacity=0.6]
  \pic[shift={(0,0,0)}] at (0,0,0) {Box={name=in1, caption=input,%
      xlabel={{"1",""}},zlabel={$N$}, depthpos=0.3,%
      fill=\InputColor,%
      height=20, width=1, depth=20}};
  \pic[shift={(2,0,0)}] at (0,0,0) {RightBandedBox={name=cr1,
      caption=convoluzione, %
      xlabel={{"K",""}},zlabel={$N$}, depthpos=0.3, %
      fill=\ConvColor,bandfill=\ConvReluColor,%
      height=20, width=3, depth=20}};
  \pic[shift={(1.5,0,0)}] at (cr1-east) {Box={name=p1, caption=pooling,%
      fill=\PoolColor,opacity=0.5,zlabel={$N/2$},height=10,width=1,depth=10}};
  \draw [connection]  (in1-east)    -- node {\midarrow} (cr1-west);
  \draw [connection]  (cr1-east)    -- node {\midarrow} (p1-west);
\end{tikzpicture}
